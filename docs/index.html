<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Home. ndjson</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>

<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">


<!-- pkgdown -->
<link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script>

<!-- mathjax -->
<script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
  </head>

  <body>
    <div class="container">
      <header>
      
<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">ndjson</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->
      
      </header>

      <div class="row">
  <div class="col-md-9">
    
<p><a href="https://travis-ci.org/hrbrmstr/ndjson"><img src="https://travis-ci.org/hrbrmstr/ndjson.svg" alt="Travis-CI Build Status"></a> <a href="https://cran.r-project.org/package=ndjson"><img src="http://www.r-pkg.org/badges/version/ndjson" alt="CRAN_Status_Badge"></a> <img src="http://cranlogs.r-pkg.org/badges/grand-total/ndjson" alt="downloads"></p>
<p><code>ndjson</code> : Wicked-fast Streaming JSON (&lsquo;ndjson&rsquo;) Reader</p>
<p>Rcpp/C++11 wrapper for <a href="https://github.com/nlohmann/json" class="uri">https://github.com/nlohmann/json</a></p>
<p>The goal is to create a completely &ldquo;flat&rdquo; <code>data.frame</code>-like structure from ndjson records in plain text ndjson files or gzip&rsquo;d ndjson files.</p>
<h3 id="installation-guidance-for-linuxbsd-ish-systems">Installation guidance for Linux/BSD-ish systems</h3>
<p>CRAN has binaries for Windows and macOS. To build this on UNIX-like systems, you need at least g++4.9 or clang++. This is a forced requirement by the ndjson library.</p>
<p>The least painful way to do this is to install gcc &gt;= 4.9 (and you should install ccache while you&rsquo;re at it) and mmodfiy <code>~/.R/Makevars</code> thusly:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r"><span class="co"># Use whatever version of (g++ &gt;=4.9 or clang++) that you downloaded</span>
VER=-<span class="fl">4.9</span>
CC=ccache gcc$(VER)
CXX=ccache g++<span class="er">$</span>(VER)
SHLIB_CXXLD=g++<span class="er">$</span>(VER)
FC=ccache gfortran
F77=ccache gfortran</code></pre></div>
<h3 id="why-ndjson-examples">Why <code>ndjson</code> + Examples</h3>
<p>An example of such files are the output from Rapid7 internet-wide scans, such as their <a href="https://scans.io/study/sonar.https">HTTPS study</a>. A gzip&rsquo;d extract of 100,000 of one of those scans weighs in abt about 171MB. The records sometimes contain heavily nested JSON elements depending on how comprehensive the certificate data and other fields were. A typical record will look like this:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">{
  <span class="st">"vhost"</span>:<span class="st"> "teamchat.buzzpoints.com"</span>,
  <span class="st">"host"</span>:<span class="st"> "52.87.143.83"</span>,
  <span class="st">"certsubject"</span>:<span class="st"> </span>{
    <span class="st">"CN"</span>:<span class="st"> "teamchat.buzzpoints.com"</span>
  },
  <span class="st">"ip"</span>:<span class="st"> "52.87.143.83"</span>,
  <span class="st">"data"</span>:<span class="st"> "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"</span>,
  <span class="st">"port"</span>:<span class="st"> "443"</span>
}</code></pre></div>
<p>A <code>system.time(df &lt;- stream_in("https-extract.json.gz"))</code> results in:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">   user  system elapsed 
 <span class="fl">14.822</span>   <span class="fl">0.224</span>  <span class="fl">15.189</span> </code></pre></div>
<p>on a 13" MacBook Pro and produces:</p>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">Classes &lsquo;tbl_dt&rsquo;, &lsquo;tbl&rsquo;, &lsquo;data.table&rsquo; and <span class="st">'data.frame'</span>:<span class="st"> </span><span class="dv">100000</span> obs. of  <span class="dv">36</span> variables:
<span class="st"> </span><span class="er">$</span><span class="st"> </span>certsubject.CN                 :<span class="st"> </span>chr  <span class="st">"*.tio.ch"</span> <span class="st">"*.starwoodhotels.com"</span> <span class="st">"a.ssl.fastly.net"</span> <span class="st">"a.ssl.fastly.net"</span> ...
 $<span class="st"> </span>data                           :<span class="st"> </span>chr  <span class="st">"SFRUUC8xLjEgNDAzIEZvcmJpZGRlbg0KU2VydmVyOiBjbG91ZGZsYXJlLW5naW54DQpEYXRlOiBNb24sIDIyIEF1ZyAyMDE2IDE3OjE2OjE2IEdNVA0KQ29udGVudC1"</span>|<span class="st"> </span>__truncated__ <span class="st">"SFRUUC8xLjAgNDAwIEJhZCBSZXF1ZXN0DQpTZXJ2ZXI6IEFrYW1haUdIb3N0DQpNaW1lLVZlcnNpb246IDEuMA0KQ29udGVudC1UeXBlOiB0ZXh0L2h0bWwNCkNvbnR"</span>|<span class="st"> </span>__truncated__ <span class="st">"SFRUUC8xLjEgNTAwIERvbWFpbiBOb3QgRm91bmQNClNlcnZlcjogVmFybmlzaA0KUmV0cnktQWZ0ZXI6IDANCmNvbnRlbnQtdHlwZTogdGV4dC9odG1sDQpDYWNoZS1"</span>|<span class="st"> </span>__truncated__ <span class="st">"SFRUUC8xLjEgNTAwIERvbWFpbiBOb3QgRm91bmQNClNlcnZlcjogVmFybmlzaA0KUmV0cnktQWZ0ZXI6IDANCmNvbnRlbnQtdHlwZTogdGV4dC9odG1sDQpDYWNoZS1"</span>|<span class="st"> </span>__truncated__ ...
 $<span class="st"> </span>host                           :<span class="st"> </span>chr  <span class="st">"104.20.28.6"</span> <span class="st">"104.80.186.186"</span> <span class="st">"151.101.255.54"</span> <span class="st">"151.101.158.15"</span> ...
 $<span class="st"> </span>ip                             :<span class="st"> </span>chr  <span class="st">"104.20.28.6"</span> <span class="st">"104.80.186.186"</span> <span class="st">"151.101.255.54"</span> <span class="st">"151.101.158.15"</span> ...
 $<span class="st"> </span>port                           :<span class="st"> </span>chr  <span class="st">"443"</span> <span class="st">"443"</span> <span class="st">"443"</span> <span class="st">"443"</span> ...
 $<span class="st"> </span>vhost                          :<span class="st"> </span>chr  <span class="st">"104.20.28.6"</span> <span class="st">"104.80.186.186"</span> <span class="st">"a.ssl.fastly.net"</span> <span class="st">"a.ssl.fastly.net"</span> ...
 $<span class="st"> </span>certsubject.C                  :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="st">"US"</span> <span class="st">"US"</span> <span class="st">"US"</span> ...
 $<span class="st"> </span>certsubject.L                  :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="st">"Stamford"</span> <span class="st">"San Francisco"</span> <span class="st">"San Francisco"</span> ...
 $<span class="st"> </span>certsubject.O                  :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="st">"STARWOOD HOTELS AND RESORTS WORLDWIDE, INC."</span> <span class="st">"Fastly, Inc."</span> <span class="st">"Fastly, Inc."</span> ...
 $<span class="st"> </span>certsubject.OU                 :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="st">"IT Solutions"</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.ST                 :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="st">"Connecticut"</span> <span class="st">"California"</span> <span class="st">"California"</span> ...
 $<span class="st"> </span>certsubject.emailAddress       :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.UNDEF              :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.businessCategory   :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.postalCode         :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.serialNumber       :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.street             :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.SN                 :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.unstructuredName   :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.ITU-T              :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.GN                 :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.description        :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.subjectAltName     :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.name               :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.DC                 :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.postOfficeBox      :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.dnQualifier        :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.generationQualifier:<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.initials           :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.pseudonym          :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.title              :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject                    :<span class="st"> </span>int  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.unstructuredAddress:<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.UID                :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.mail               :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 $<span class="st"> </span>certsubject.Mail               :<span class="st"> </span>chr  <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> <span class="ot">NA</span> ...
 -<span class="st"> </span><span class="kw">attr</span>(*, <span class="st">".internal.selfref"</span>)=<span class="er">&lt;</span>externalptr&gt;<span class="st"> </span></code></pre></div>
<p>All of the certificate sub-field data elents have been expanded and we have a highly performant <code>tbl_dt</code> to work with now either in <code>dplyr</code> syntax or <code>data.table</code> heiroglyphic syntax. Just go see what you have to do in <code>jsonlite</code> to get a similar output (and how long it will take).</p>
<p><code>pryr::object_size(df)</code> for that shows it&rsquo;s consuming <code>394 MB</code>, which means we can read in many more extracts comfortably on a reasonably configured system and most (if not all) of it on a well-configured AWS box.</p>
<p>However, if you do end up trying to work with that scan data, it&rsquo;s highly recommended that you use <code>jq</code> to filter out the fields or records you want into a more compact ndjson file.</p>
<p>The following functions are implemented:</p>
<ul>
<li>
<code>stream_in</code>: Stream in ndjson from a file (handles <code>.gz</code> files)</li>
<li>
<code>validate</code>: Validate JSON records in an ndjson file (handles <code>.gz</code> files)</li>
<li>
<code>flatten</code>: Flatten a character vector of individual JSON lines</li>
</ul>
<p>There are no current plans for a <code>stream_out()</code> function since <code>jsonlite::stream_out()</code> does a great job tossing <code>data.frame</code>-like structures out to an ndjson file.</p>
<h3 id="installation">Installation</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools::<span class="kw">install_git</span>(<span class="st">"https://gitlab.com/hrbrmstr/ndjson.git"</span>)</code></pre></div>
<h3 id="usage">Usage</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ndjson)
<span class="kw">library</span>(microbenchmark)

<span class="co"># current verison</span>
<span class="kw">packageVersion</span>(<span class="st">"ndjson"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## [1] '0.3.0.0'</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="reference/flatten.html">flatten</a></span>(<span class="st">'{"top":{"next":{"final":1,"end":true},"another":"yes"},"more":"no"}'</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## Source: local data table [1 x 4]
## 
## # tbl_dt [1 &times; 4]
##    more top.another top.next.end top.next.final
##   &lt;chr&gt;       &lt;chr&gt;        &lt;lgl&gt;          &lt;dbl&gt;
## 1    no         yes         TRUE              1</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">f &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"test.json"</span>, <span class="dt">package=</span><span class="st">"ndjson"</span>)
gzf &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">"extdata"</span>, <span class="st">"testgz.json.gz"</span>, <span class="dt">package=</span><span class="st">"ndjson"</span>)

dplyr::<span class="kw">glimpse</span>(ndjson::<span class="kw"><a href="reference/stream_in.html">stream_in</a></span>(f))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## Observations: 100
## Variables: 8
## $ args                    &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ headers.Accept          &lt;chr&gt; "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*",...
## $ headers.Accept-Encoding &lt;chr&gt; "identity", "identity", "identity", "identity", "identity", "identity", "identity",...
## $ headers.Host            &lt;chr&gt; "httpbin.org", "httpbin.org", "httpbin.org", "httpbin.org", "httpbin.org", "httpbin...
## $ headers.User-Agent      &lt;chr&gt; "Wget/1.18 (darwin15.5.0)", "Wget/1.18 (darwin15.5.0)", "Wget/1.18 (darwin15.5.0)",...
## $ id                      &lt;dbl&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 2...
## $ origin                  &lt;chr&gt; "50.252.233.22", "50.252.233.22", "50.252.233.22", "50.252.233.22", "50.252.233.22"...
## $ url                     &lt;chr&gt; "http://httpbin.org/stream/100", "http://httpbin.org/stream/100", "http://httpbin.o...</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dplyr::<span class="kw">glimpse</span>(ndjson::<span class="kw"><a href="reference/stream_in.html">stream_in</a></span>(gzf))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## Observations: 100
## Variables: 8
## $ args                    &lt;int&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,...
## $ headers.Accept          &lt;chr&gt; "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*",...
## $ headers.Accept-Encoding &lt;chr&gt; "identity", "identity", "identity", "identity", "identity", "identity", "identity",...
## $ headers.Host            &lt;chr&gt; "httpbin.org", "httpbin.org", "httpbin.org", "httpbin.org", "httpbin.org", "httpbin...
## $ headers.User-Agent      &lt;chr&gt; "Wget/1.18 (darwin15.5.0)", "Wget/1.18 (darwin15.5.0)", "Wget/1.18 (darwin15.5.0)",...
## $ id                      &lt;dbl&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 2...
## $ origin                  &lt;chr&gt; "50.252.233.22", "50.252.233.22", "50.252.233.22", "50.252.233.22", "50.252.233.22"...
## $ url                     &lt;chr&gt; "http://httpbin.org/stream/100", "http://httpbin.org/stream/100", "http://httpbin.o...</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dplyr::<span class="kw">glimpse</span>(jsonlite::<span class="kw"><a href="reference/stream_in.html">stream_in</a></span>(<span class="kw">file</span>(f), <span class="dt">flatten=</span><span class="ot">TRUE</span>, <span class="dt">verbose=</span><span class="ot">FALSE</span>))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## Observations: 100
## Variables: 7
## $ url                     &lt;chr&gt; "http://httpbin.org/stream/100", "http://httpbin.org/stream/100", "http://httpbin.o...
## $ id                      &lt;int&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 2...
## $ origin                  &lt;chr&gt; "50.252.233.22", "50.252.233.22", "50.252.233.22", "50.252.233.22", "50.252.233.22"...
## $ headers.Host            &lt;chr&gt; "httpbin.org", "httpbin.org", "httpbin.org", "httpbin.org", "httpbin.org", "httpbin...
## $ headers.Accept-Encoding &lt;chr&gt; "identity", "identity", "identity", "identity", "identity", "identity", "identity",...
## $ headers.Accept          &lt;chr&gt; "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*",...
## $ headers.User-Agent      &lt;chr&gt; "Wget/1.18 (darwin15.5.0)", "Wget/1.18 (darwin15.5.0)", "Wget/1.18 (darwin15.5.0)",...</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">dplyr::<span class="kw">glimpse</span>(jsonlite::<span class="kw"><a href="reference/stream_in.html">stream_in</a></span>(<span class="kw">gzfile</span>(gzf), <span class="dt">flatten=</span><span class="ot">TRUE</span>, <span class="dt">verbose=</span><span class="ot">FALSE</span>))</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## Observations: 100
## Variables: 7
## $ url                     &lt;chr&gt; "http://httpbin.org/stream/100", "http://httpbin.org/stream/100", "http://httpbin.o...
## $ id                      &lt;int&gt; 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 2...
## $ origin                  &lt;chr&gt; "50.252.233.22", "50.252.233.22", "50.252.233.22", "50.252.233.22", "50.252.233.22"...
## $ headers.Host            &lt;chr&gt; "httpbin.org", "httpbin.org", "httpbin.org", "httpbin.org", "httpbin.org", "httpbin...
## $ headers.Accept-Encoding &lt;chr&gt; "identity", "identity", "identity", "identity", "identity", "identity", "identity",...
## $ headers.Accept          &lt;chr&gt; "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*", "*/*",...
## $ headers.User-Agent      &lt;chr&gt; "Wget/1.18 (darwin15.5.0)", "Wget/1.18 (darwin15.5.0)", "Wget/1.18 (darwin15.5.0)",...</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">microbenchmark</span>(
    <span class="dt">ndjson=</span>{ ndjson::<span class="kw"><a href="reference/stream_in.html">stream_in</a></span>(f) },
  <span class="dt">jsonlite=</span>{ jsonlite::<span class="kw"><a href="reference/stream_in.html">stream_in</a></span>(<span class="kw">file</span>(f), <span class="dt">flatten=</span><span class="ot">TRUE</span>, <span class="dt">verbose=</span><span class="ot">FALSE</span>) }
)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## Unit: milliseconds
##      expr      min       lq     mean   median       uq       max neval cld
##    ndjson 2.694575 2.883204 3.000030 2.956595 3.033864  4.319816   100  a 
##  jsonlite 8.487524 9.011873 9.411114 9.151305 9.334732 12.523081   100   b</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">microbenchmark</span>(
    <span class="dt">ndjson=</span>{ ndjson::<span class="kw"><a href="reference/stream_in.html">stream_in</a></span>(gzf) },
  <span class="dt">jsonlite=</span>{ jsonlite::<span class="kw"><a href="reference/stream_in.html">stream_in</a></span>(<span class="kw">gzfile</span>(gzf), <span class="dt">flatten=</span><span class="ot">TRUE</span>, <span class="dt">verbose=</span><span class="ot">FALSE</span>) }
)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## Unit: milliseconds
##      expr      min       lq     mean   median       uq       max neval cld
##    ndjson 2.856464 2.957216 3.030433 3.005832 3.069114  3.436334   100  a 
##  jsonlite 8.302337 8.631042 9.021032 8.795794 9.031557 12.158147   100   b</code></pre></div>
<h3 id="test-results">Test Results</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ndjson)
<span class="kw">library</span>(testthat)

<span class="kw">date</span>()</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## [1] "Tue Sep 27 11:08:18 2016"</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">test_dir</span>(<span class="st">"tests/"</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode R"><code class="sourceCode r">## testthat results ========================================================================================================
## OK: 4 SKIPPED: 0 FAILED: 0
## 
## DONE ===================================================================================================================</code></pre></div>
<p>Please note that this project is released with a <a href="CONDUCT.md">Contributor Code of Conduct</a>. By participating in this project you agree to abide by its terms.</p>

  </div>
</div>

      <footer>
      <p>Built by <a href="http://hadley.github.io/pkgdown/">pkgdown</a>. Styled with <a href="http://getbootstrap.com">Bootstrap 3</a>.</p>
      </footer>
   </div>

  </body>
</html>
