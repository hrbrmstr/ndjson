---
output: rmarkdown::github_document
---

`ndjson` : Wicked-fast Streaming JSON ('ndjson') Reader

Rcpp/C++11 wrapper for <https://github.com/nlohmann/json>

The goal is to create a completely "flat" `data.frame`-like structure from ndjson records in plain text ndjson files or gzip'd ndjson files

The following functions are implemented:

- `stream_in`:	Stream in ndjson from a file (handles `.gz` files)
- `validate`:	Validate JSON records in an ndjson file (handles `.gz` files)

### Installation

```{r eval=FALSE}
devtools::install_git("https://gitlab.com/hrbrmstr/ndjson.git")
```

```{r echo=FALSE, message=FALSE, warning=FALSE, error=FALSE}
options(width=120)
```

### Usage

```{r message=FALSE}
library(ndjson)
library(microbenchmark)

# current verison
packageVersion("ndjson")

f <- system.file("extdata", "test.json", package="ndjson")
gzf <- system.file("extdata", "testgz.json.gz", package="ndjson")

dplyr::glimpse(ndjson::stream_in(f))
dplyr::glimpse(ndjson::stream_in(gzf))

dplyr::glimpse(jsonlite::stream_in(file(f), flatten=TRUE, verbose=FALSE))
dplyr::glimpse(jsonlite::stream_in(gzfile(gzf), flatten=TRUE, verbose=FALSE))

microbenchmark(
    ndjson={ ndjson::stream_in(f) },
  jsonlite={ jsonlite::stream_in(file(f), flatten=TRUE, verbose=FALSE) }
)

microbenchmark(
    ndjson={ ndjson::stream_in(gzf) },
  jsonlite={ jsonlite::stream_in(gzfile(gzf), flatten=TRUE, verbose=FALSE) }
)

```

### Test Results

```{r message=FALSE}
library(ndjson)
library(testthat)

date()

test_dir("tests/")
```

Please note that this project is released with a [Contributor Code of Conduct](CONDUCT.md). By participating in this project you agree to abide by its terms.